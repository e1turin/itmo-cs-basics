%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LAB-5 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%>>>>>>>>>>>>>>>>>>>>>>>>>> ПЕРЕМЕННЫЕ >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
%>>>>> Информация о кафедре
%\newcommand{\year}{2021 г.}  % Год устанавливается автоматически
\newcommand{\city}{Санкт-Петербург}  %  Футер, нижний колонтитул на титульном листе
\newcommand{\university}{Национальный исследовательский университет ИТМО}  % первая строка
\newcommand{\department}{Факультет программной инженерии и компьютерной техники}  % Вторая строка
\newcommand{\major}{Направление системного и прикладного программного обеспечения}  % Треьтя строка
%<<<<< Информация о кафедре

%>>>>> Назание работы
\newcommand{\reporttype}{ОТЧЕТ ПО ЛАБОРАТОРНОЙ РАБОТЕ} % тип работы, (главный заголовок титульного листа)
\newcommand{\lab}{Лабораторная работа}          % вид работы
\newcommand{\labnumber}{№ 5}                    % порядковый номер работы
\newcommand{\subject}{Основы профессиональной деятельности}         % учебный предмет
\newcommand{\labtheme}{Исследование работы БЭВМ}            % Тема лабораторной работы
\newcommand{\variant}{№ 1035}                % номер варианта работы

\newcommand{\student}{Тюрин Иван Николаевич}    % определение ФИО студента
\newcommand{\studygroup}{P3110}                 % определение учебной группы 
\newcommand{\teacher}{Клименков С. В.,\\[1mm]     % ФИО лектора
                        Ларочкин Г. И.}          % ФИО практика
%<<<<<<<<<<<<<<<<<<<<<<<<<< ПЕРЕМЕННЫЕ <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


%>>>>>>>>>>>>>>>>>>>>>> ПРЕАМБУЛА >>>>>>>>>>>>>>>>>>>>>>>>>
\include{preamble}
%<<<<<<<<<<<<<<<<<<<<<< ПРЕАМБУЛА <<<<<<<<<<<<<<<<<<<<<<<<<



%%%%%%%%%%%%%%%%%%% СОДЕРЖИМОЕ ОТЧЕТА %%%%%%%%%%%%%%%%%%%%%
%>>>>>>>>>>>>>>> ''''''''''''''''''''''' >>>>>>>>>>>>>>>>>>
\begin{document}


%>>>>>>>>>>>>>>>> ОПРЕДЕЛЕНИЕ НАЗВАНИЙ >>>>>>>>>>>>>>>>>>>>
% Переоформление некоторых стандартных названий
%\renewcommand{\chaptername}{Лабораторная работа}
\renewcommand{\chaptername}{\lab\ \labnumber} % переименование глав
\def\contentsname{Содержание} % переименование оглавления
%<<<<<<<<<<<<<<<< ОПРЕДЕЛЕНИЕ НАЗВАНИЙ <<<<<<<<<<<<<<<<<<<<


%>>>>>>>>>>>>>>>>> ТИТУЛЬНАЯ СТРАНИЦА >>>>>>>>>>>>>>>>>>>>>
\include{titlepage}
%<<<<<<<<<<<<<<<<< ТИТУЛЬНАЯ СТРАНИЦА <<<<<<<<<<<<<<<<<<<<<


%>>>>>>>>>>>>>>>>>>>>> СОДЕРЖАНИЕ >>>>>>>>>>>>>>>>>>>>>>>>>
% Содержание
\tableofcontents
%<<<<<<<<<<<<<<<<<<<<< СОДЕРЖАНИЕ <<<<<<<<<<<<<<<<<<<<<<<<<


%%%%%%%%%%%%%%%%%%%%%%% КОД РАБОТЫ %%%%%%%%%%%%%%%%%%%%%%%%
%>>>>>>>>>>>>>>>>>>>'''''''''''''''''>>>>>>>>>>>>>>>>>>>>>
\newpage
\Chapter{\lab\ \labnumber}{\labtheme}{}

\Section{Задание варианта \variant}
\begin{center}
, , ,
\end{center}
\noindent

\textit{По выданному преподавателем варианту разработать программу асинхронного обмена данными с внешним устройством. При помощи программы осуществить ввод или вывод информации, используя в качестве подтверждения данных сигнал (кнопку) готовности ВУ.}
\begin{itemize}
    \item Программа осуществляет асинхронный ввод данных с \textit{ВУ-3}
    \item Программа начинается с адреса $\mathrm{5D2}_{16}$. Размещаемая строка находится по адресу $562_{16}$.
    \item Строка должна быть представлена в кодировке \textit{КОИ-8}.
    \item Формат представления строки в памяти: \textit{АДР1: СИМВ2 СИМВ1 АДР2: СИМВ4 СИМВ3 ... СТОП\_СИМВ}.
    \item Ввод или вывод строки должен быть завершен по символу c кодом \hex{0A} (NL). Стоп символ является обычным символом строки и подчиняется тем же правилам расположения в памяти что и другие символы строки.
\end{itemize}

\begin{center}
    ' ' '
\end{center}

\newpage
\Section{Описание программы}

\Subsection{Назначение программы}

Описание программы представлено в таблице 1.1. \ref{tab:program-desc}.
Программа осуществляет асинхронный ввод кодов символов (кодировка \textit{KOI8-R})  через \textit{ВУ-3}, и после ввода стоп-символа \hex{0a=NL} прекращает считывание, начинает асинхронный вывод символов соответствующих введенным кодам через \textit{ВУ-5} (текстовый принтер).
\Table{program-desc}{Описание работы подпрограмм}{
    %\begin{longtable}{!t}
    \input{program-desc}
    %\end{longtable}
}
\Subsection{Область представления и допустимых значений}
Пользователю доступны для ввода любые однобайтовые беззнаковые числа, то есть из диапозона $[0;255]$, соответствующие символам в кодировке \textit{KOI8-R}, любое из них будет выведено при помощи принтера. Однако после символа с номером $10_{10}$, то есть \hex{0a}, ввод прекращается. Так же при вводе символа с кодом \hex{00} произойдет очистка вывода принтера.

Количество введенных символов не должно превышать $112_{10}=\hex{5D2}-\hex{562}$ (с учетом стоп-символа). Это ограничение вызвано расположением программы и символов строки в памяти указаным в задании.

\Subsection{Трассировка программы}

Трассировка программы для введенных символов \textit{Z, V}, коды которых соответственно \hex{5a} и \hex{56}, представлена в таблице 1.4.\ref{tab:tracetable-in} и 1.6.\ref{tab:tracetable-in}.

Были введены коды символов \textit{Z, V} и код стоп-символа \verb|\n| эти же символы были напечатаны на принтере.

\Table{tracetable-in}{Трассировка программы c с момента старта до момента начала цикла вывода}{
    \input{tracetable-in}
}
\Table{tracetable-out}{Трассировка программы c момента начала цикла вывода до конца}{
    \input{tracetable-out}
}
\Section{Программа}
Была составлена программа на языке ассемблера. Она представлена в листингaх \ref{lst:script-setup-and-read} и \ref{lst:script-print-subfunc}.

\refstepcounter{lstlisting}
\begin{figure}[h] %- \usepackage {float} %[h]
    \begin{center}
        \lstinputlisting[]{listings/script-setup-and-read.asm}
    \end{center}
    \captionof{lstlisting}{Код программы на языке ассемблена БЭВМ: параметры программы, переменные и цикл ввода символов}
    \label{lst:script-setup-and-read}
\end{figure}

\refstepcounter{lstlisting}
\begin{figure}[h] %- \usepackage {float} %[h]
    \begin{center}
        \lstinputlisting[]{listings/script-print-subfunc.asm}
    \end{center}
    \captionof{lstlisting}{Код программы на языке ассемблена БЭВМ: цикл вывода символов и подпрограммы для асинхронного ввода и вывода символов}
    \label{lst:script-print-subfunc}
\end{figure}


\Section{Вывод}
Научился красиво называть метки в ассемблере БЭВМ. Научился писать программы c асинхронным вводом-выводом при помощи цикла. Научился работать с УВ текстовым принтером (поработал с хотя бы каким-то принтером).

\newpage
%<<<<<<<<<<<<<<<<<<<<<< КОД РАБОТЫ <<<<<<<<<<<<<<<<<<<<<<<<


%>>>>>>>>>>>>>>>> СПИСОК ЛИТЕРАТУРЫ >>>>>>>>>>>>>>>>>>>>>>>
%\include{biblist}  % Для соответсвия гост, придется доработать. Нужен файл .bib
%<<<<<<<<<<<<<<<<<<<< СПИСОК ЛИТЕРАТУРЫ <<<<<<<<<<<<<<<<<<<


\end{document}
%<<<<<<<<<<<<<<<< ,,,,,,,,,,,,,,,,,,,,,,, <<<<<<<<<<<<<<<<<
%<<<<<<<<<<<<<<<<<<< СОДЕРЖИМОЕ ОТЧЕТА <<<<<<<<<<<<<<<<<<<<
