%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LAB-5 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%>>>>>>>>>>>>>>>>>>>>>>>>>> ПЕРЕМЕННЫЕ >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
%>>>>> Информация о кафедре
%\newcommand{\year}{2021 г.}  % Год устанавливается автоматически
\newcommand{\city}{Санкт-Петербург}  %  Футер, нижний колонтитул на титульном листе
\newcommand{\university}{Национальный исследовательский университет ИТМО}  % первая строка
\newcommand{\department}{Факультет программной инженерии и компьютерной техники}  % Вторая строка
\newcommand{\major}{Направление системного и прикладного программного обеспечения}  % Треьтя строка
%<<<<< Информация о кафедре

%>>>>> Назание работы
\newcommand{\reporttype}{ОТЧЕТ ПО ЛАБОРАТОРНОЙ РАБОТЕ} % тип работы, (главный заголовок титульного листа)
\newcommand{\lab}{Лабораторная работа}          % вид работы
\newcommand{\labnumber}{№ 5}                    % порядковый номер работы
\newcommand{\subject}{Основы профессиональной деятельности}         % учебный предмет
\newcommand{\labtheme}{Исследование работы БЭВМ: асинхронный ввод/вывод с помощью прерываний}            % Тема лабораторной работы
\newcommand{\variant}{№ 1007}                % номер варианта работы

\newcommand{\student}{Тюрин Иван Николаевич}    % определение ФИО студента
\newcommand{\studygroup}{P3110}                 % определение учебной группы 
\newcommand{\teacher}{Клименков С. В.,\\[1mm]     % ФИО лектора
                        Ларочкин Г. И.}          % ФИО практика
%<<<<<<<<<<<<<<<<<<<<<<<<<< ПЕРЕМЕННЫЕ <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


%>>>>>>>>>>>>>>>>>>>>>> ПРЕАМБУЛА >>>>>>>>>>>>>>>>>>>>>>>>>
\include{preamble}
%<<<<<<<<<<<<<<<<<<<<<< ПРЕАМБУЛА <<<<<<<<<<<<<<<<<<<<<<<<<



%%%%%%%%%%%%%%%%%%% СОДЕРЖИМОЕ ОТЧЕТА %%%%%%%%%%%%%%%%%%%%%
%>>>>>>>>>>>>>>> ''''''''''''''''''''''' >>>>>>>>>>>>>>>>>>
\begin{document}


%>>>>>>>>>>>>>>>> ОПРЕДЕЛЕНИЕ НАЗВАНИЙ >>>>>>>>>>>>>>>>>>>>
% Переоформление некоторых стандартных названий
%\renewcommand{\chaptername}{Лабораторная работа}
\renewcommand{\chaptername}{\lab\ \labnumber} % переименование глав
\def\contentsname{Содержание} % переименование оглавления
%<<<<<<<<<<<<<<<< ОПРЕДЕЛЕНИЕ НАЗВАНИЙ <<<<<<<<<<<<<<<<<<<<


%>>>>>>>>>>>>>>>>> ТИТУЛЬНАЯ СТРАНИЦА >>>>>>>>>>>>>>>>>>>>>
\include{titlepage}
%<<<<<<<<<<<<<<<<< ТИТУЛЬНАЯ СТРАНИЦА <<<<<<<<<<<<<<<<<<<<<


%>>>>>>>>>>>>>>>>>>>>> СОДЕРЖАНИЕ >>>>>>>>>>>>>>>>>>>>>>>>>
% Содержание
\tableofcontents
%<<<<<<<<<<<<<<<<<<<<< СОДЕРЖАНИЕ <<<<<<<<<<<<<<<<<<<<<<<<<


%%%%%%%%%%%%%%%%%%%%%%% КОД РАБОТЫ %%%%%%%%%%%%%%%%%%%%%%%%
%>>>>>>>>>>>>>>>>>>>'''''''''''''''''>>>>>>>>>>>>>>>>>>>>>
\newpage
\Chapter{\lab\ \labnumber}{\labtheme}{}

\Section{Задание варианта \variant}
\begin{center}
, , ,
\end{center}
\noindent





\textit{По выданному преподавателем варианту разработать и исследовать работу комплекса программ обмена данными в режиме прерывания программы. Основная программа должна изменять содержимое заданной ячейки памяти (Х), которое должно быть представлено как знаковое число. Область допустимых значений изменения Х должна быть ограничена заданной функцией F(X) и конструктивными особенностями регистра данных ВУ (8-ми битное знаковое представление). Программа обработки прерывания должна выводить на ВУ модифицированное значение Х в соответствии с вариантом задания, а также игнорировать все необрабатываемые прерывания.}
\begin{enumerate}
    \item Основная программа должна уменьшать на 2 содержимое $X$ (ячейки памяти с адресом $015_{16}$) в цикле.
    \item Обработчик прерывания должен по нажатию кнопки готовности. \textit{ВУ-3} осуществлять вывод результата вычисления функции $F(X)=3X+1$ на данное ВУ, a по нажатию кнопки готовности \textit{ВУ-2} прибавить утроенное содержимое РД данного ВУ к $X$, результат записать в $X$.
    \item Если $Х$ оказывается вне ОДЗ при выполнении любой операции по его изменению, то необходимо в $Х$ записать максимальное по ОДЗ число.
\end{enumerate}
\begin{center}
    ' ' '
\end{center}

\newpage
\Section{Описание программы}

\Subsection{Назначение программы}

Описание программы представлено в таблице \ref{tab:program-desc}.
Программа осуществляет асинхронный ввод с \textit{ВУ-2} и вывод на \textit{ВУ-3} при помощи прерываний. \textit{ВУ-2} производит прерывание при выставлении готовности кнопкой, после чего над переменной в программе производятся определенные операции. \textit{ВУ-3} производит прерывание при выставлении готовности кнопкой, после чего над переменной производятся операции и результат выводится на табло этого устройства.

% \Table{program-desc}{Описание работы подпрограмм}{
    %\begin{longtable}{!t}
    \input{program-desc} %%%%%%%%%%% ТАБЛИЦА %%%%%%%%%%
    %\end{longtable}
% }

\Subsection{Область допустимых значений}
Пользователю доступны для ввода любые однобайтовые знаковые числа, то есть из диапозона $[-128;127]$. ОДЗ для переменной $X$ находится из соотношения:
$$-128\leq 3x+1 \leq 127 \Rarr $$
$$\hex{ffd5}=-43 \leq x \leq 42 = \hex{002a}$$

\Section{Методика проверки}
\textbf{Главный цикл}
\begin{enumerate}
    \item В переменную x записать \hex{ffd8}.
\item Поставить точку остановы в цикле main на адрес \hex{04b}.
\item Загрузить программный компекс в память БЭВМ.
\item Запустить выполнение программы в автоматическом режиме с адреса \hex{036} до остановки.
\item Записать значение аккумулятора, оно должно быть на 2 меньше, чем число которое мы записали в переменную.
\item Запустить выполнение программы с адреса предыдущей остановки до слудующей остановки.
\item Записать значение аккумулятора и сверить его с предпологаемым: оно должно быть равно верхней границе ОДЗ \hex{002a} (т.к. на новом витке цикла переменная вышла из ОДЗ).
\end{enumerate}

\textbf{Обработчик прерывания ВУ-2}
\begin{enumerate}
\item Убрать прежние и поставить точки остановы в подпрограмме \verb|int2| на адресах \hex{019} и \hex{025}.
\item Загрузить программный компекс в память БЭВМ.
\item Запустить выполнение программы в автоматическом режиме с адреса \hex{036}.
\item Установить значение и выставить режим готовности на ВУ-2.
\item Выполнять программу до точки остановы.
\item Записать значение аккумулятора.
\item Выполнить программу до следующей точки остановы.
\item Записать значение аккумулятора.
\item Рассчитать значение переменной по формуле $x+3y$, где $y$ - число введенное на ВУ-2, если вычисленное значение не находится в ОДЗ, то должно быть равно \hex{02a}.
\item Сравнить полученные значения аккумулятора: второе должно удовлетворять рассчетному.
\end{enumerate}

\textbf{Обработчик прерывания ВУ-3}
\begin{enumerate}
\item Убрать прежние и поставить точки остановы в подпрограмме int3 на адресах \hex{027} и \hex{02d}.
\item Загрузить программный комплекс в память БЭВМ.
\item Запустить выполнение программы в автоматическом режиме с адреса \hex{036}.
\item Выставить режим готовности на ВУ-3.
\item Выполнять программу до точки остановы.
\item Записать значение аккумулятора.
\item Выполнить программу до следующей точки остановы.
\item Записать значение аккумулятора.
\item Рассчитать значение переменной по формуле $3x+1$, если вычисленное значение не находится в ОДЗ, то должно быть равно \hex{02a}.
\item Сравнить полученные значения аккумулятора: второе должно удовлетворять рассчетному.
\end{enumerate}


\Section{Программа}
Была составлена программа на языке ассемблера. Она представлена в листингaх \ref{lst:script-p1} и \ref{lst:script-p2}.

\refstepcounter{lstlisting}
\begin{figure}[h] %- \usepackage {float} %[h]
    \begin{center}
        \lstinputlisting[]{listings/script-1part.asm}
    \end{center}
    \captionof{lstlisting}{Первая чать кода программы на языке ассемблена БЭВМ: параметры программы, переменные, инициализация векторов прерывания, обработчики прерывания}
    \label{lst:script-p1}
\end{figure}

\refstepcounter{lstlisting}
\begin{figure}[h] %- \usepackage {float} %[h]
    \begin{center}
        \lstinputlisting[]{listings/script-2part.asm}
    \end{center}
    \captionof{lstlisting}{Вторая часть кода программы на языке ассемблена БЭВМ: подпрограмма проверки выхода результата вычисленяи из ОДЗ и главный цикл}
    \label{lst:script-p2}
\end{figure}


\Section{Вывод}
Нацчился работать с прерываниями в БЭВМ, писать код на языке ассемблера БЭВМ для их обработки. Научился делать одновременно несколько важных лаб за ночь и терпению в очереди за день.

\newpage
%<<<<<<<<<<<<<<<<<<<<<< КОД РАБОТЫ <<<<<<<<<<<<<<<<<<<<<<<<


%>>>>>>>>>>>>>>>> СПИСОК ЛИТЕРАТУРЫ >>>>>>>>>>>>>>>>>>>>>>>
%\include{biblist}  % Для соответсвия гост, придется доработать. Нужен файл .bib
%<<<<<<<<<<<<<<<<<<<< СПИСОК ЛИТЕРАТУРЫ <<<<<<<<<<<<<<<<<<<


\end{document}
%<<<<<<<<<<<<<<<< ,,,,,,,,,,,,,,,,,,,,,,, <<<<<<<<<<<<<<<<<
%<<<<<<<<<<<<<<<<<<< СОДЕРЖИМОЕ ОТЧЕТА <<<<<<<<<<<<<<<<<<<<
